generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id            Int       @id @default(autoincrement())
  ho_ten        String    @db.VarChar(255)
  email         String    @unique @db.VarChar(255)
  pass_word     String    @db.VarChar(255)
  phone         String?   @db.VarChar(20)
  birth_day     String?   @db.VarChar(255)
  gender        String?   @db.VarChar(10)
  role          String    @default("USER") @db.VarChar(50)
  skill         String?   @db.Text
  certification String?   @db.Text
  anh_dai_dien  String?   @db.VarChar(500)
  is_active     Boolean   @default(true)
  is_deleted    Boolean   @default(false)
  deleted_by    Int       @default(0)
  deleted_at    DateTime?
  created_at    DateTime  @default(now())
  updated_at    DateTime  @default(now()) @updatedAt

  cong_viec          cong_viec[]
  thue_cong_viec_thue thue_cong_viec[] @relation("ThueCongViec_thue")
  thue_cong_viec_lam  thue_cong_viec[] @relation("ThueCongViec_lam")

  @@map("users")
}

model loai_cong_viec {
  id                  Int                        @id @default(autoincrement())
  ten_loai_cong_viec String                     @db.VarChar(255)
  hinh_anh           String?                    @db.VarChar(500)
  mo_ta              String?                    @db.Text
  thu_tu             Int                        @default(0)
  is_deleted         Boolean                    @default(false)
  deleted_by         Int                        @default(0)
  deleted_at         DateTime?
  created_at         DateTime                   @default(now())
  updated_at         DateTime                   @default(now()) @updatedAt
  chi_tiet_loai_cong_viec chi_tiet_loai_cong_viec[]

  @@map("loai_cong_viec")
}

model chi_tiet_loai_cong_viec {
  id                  Int           @id @default(autoincrement())
  ten_chi_tiet       String        @db.VarChar(255)
  hinh_anh           String?       @db.VarChar(500)
  mo_ta              String?       @db.Text
  thu_tu             Int           @default(0)
  ma_loai_cong_viec  Int
  is_deleted         Boolean       @default(false)
  deleted_by         Int           @default(0)
  deleted_at         DateTime?
  created_at         DateTime      @default(now())
  updated_at         DateTime      @default(now()) @updatedAt
  loai_cong_viec     loai_cong_viec @relation(fields: [ma_loai_cong_viec], references: [id])
  cong_viec          cong_viec[]

  @@map("chi_tiet_loai_cong_viec")
}

model cong_viec {
  id                     Int            @id @default(autoincrement())
  ten_cong_viec         String         @db.VarChar(255)
  danh_gia              Int            @default(0)
  gia_tien              Int
  hinh_anh              String?        @db.VarChar(500)
  mo_ta                 String?        @db.Text
  mo_ta_ngan            String?        @db.VarChar(500)
  sao_cong_viec         Int            @default(0)
  ma_chi_tiet_loai      Int
  nguoi_tao             Int
  trang_thai             String         @default("AVAILABLE") @db.VarChar(50)
  so_luong_da_thue      Int            @default(0)
  so_luong_da_hoan_thanh Int           @default(0)
  is_deleted            Boolean        @default(false)
  deleted_by            Int            @default(0)
  deleted_at            DateTime?
  created_at            DateTime       @default(now())
  updated_at            DateTime       @default(now()) @updatedAt
  chi_tiet_loai_cong_viec chi_tiet_loai_cong_viec @relation(fields: [ma_chi_tiet_loai], references: [id])
  users                 users          @relation(fields: [nguoi_tao], references: [id])
  thue_cong_viec        thue_cong_viec[]

  @@map("cong_viec")
}

model thue_cong_viec {
  id                    Int           @id @default(autoincrement())
  ma_cong_viec          Int
  ma_nguoi_thue         Int
  ma_nguoi_lam          Int
  ngay_thue             DateTime      @default(now())
  ngay_bat_dau          DateTime?
  ngay_hoan_thanh       DateTime?
  hoan_thanh            Boolean       @default(false)
  trang_thai            String        @default("PENDING") @db.VarChar(50)
  ghi_chu               String?       @db.Text
  danh_gia              Int           @default(0)
  noi_dung_danh_gia     String?       @db.Text
  is_deleted            Boolean       @default(false)
  deleted_by            Int           @default(0)
  deleted_at            DateTime?
  created_at            DateTime      @default(now())
  updated_at            DateTime      @default(now()) @updatedAt
  cong_viec             cong_viec     @relation(fields: [ma_cong_viec], references: [id])
  users_thue            users         @relation("ThueCongViec_thue", fields: [ma_nguoi_thue], references: [id])
  users_lam             users         @relation("ThueCongViec_lam", fields: [ma_nguoi_lam], references: [id])

  @@map("thue_cong_viec")
}

model binh_luan {
  id           Int       @id @default(autoincrement())
  ma_cong_viec Int
  ma_nguoi_binh_luan Int
  ngay_binh_luan DateTime @default(now())
  noi_dung     String    @db.Text
  sao_binh_luan Int      @default(0)
  is_deleted   Boolean   @default(false)
  deleted_by   Int       @default(0)
  deleted_at   DateTime?
  created_at   DateTime  @default(now())
  updated_at   DateTime  @default(now()) @updatedAt

  @@map("binh_luan")
}

model file_upload {
  id           Int       @id @default(autoincrement())
  ten_file     String    @db.VarChar(255)
  duong_dan    String    @db.VarChar(500)
  kich_thuoc   Int
  loai_file    String    @db.VarChar(100)
  ma_nguoi_upload Int
  is_deleted   Boolean   @default(false)
  deleted_by   Int       @default(0)
  deleted_at   DateTime?
  created_at   DateTime  @default(now())
  updated_at   DateTime  @default(now()) @updatedAt

  @@map("file_upload")
}

model thong_bao {
  id           Int       @id @default(autoincrement())
  tieu_de      String    @db.VarChar(255)
  noi_dung     String    @db.Text
  ma_nguoi_nhan Int
  da_doc       Boolean   @default(false)
  is_deleted   Boolean   @default(false)
  deleted_by   Int       @default(0)
  deleted_at   DateTime?
  created_at   DateTime  @default(now())
  updated_at   DateTime  @default(now()) @updatedAt

  @@map("thong_bao")
}


<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
</p>

[circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
[circleci-url]: https://circleci.com/gh/nestjs/nest

  <p align="center">A progressive <a href="http://nodejs.org" target="_blank">Node.js</a> framework for building efficient and scalable server-side applications.</p>
    <p align="center">
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/v/@nestjs/core.svg" alt="NPM Version" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
<a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
<a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
<a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
<a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
  <a href="https://paypal.me/kamilmysliwiec" target="_blank"><img src="https://img.shields.io/badge/Donate-PayPal-ff3f59.svg" alt="Donate us"/></a>
    <a href="https://opencollective.com/nest#sponsor"  target="_blank"><img src="https://img.shields.io/badge/Support%20us-Open%20Collective-41B883.svg" alt="Support us"></a>
  <a href="https://twitter.com/nestframework" target="_blank"><img src="https://img.shields.io/twitter/follow/nestframework.svg?style=social&label=Follow" alt="Follow us on Twitter"></a>
</p>
  <!--[![Backers on Open Collective](https://opencollective.com/nest/backers/badge.svg)](https://opencollective.com/nest#backer)
  [![Sponsors on Open Collective](https://opencollective.com/nest/sponsors/badge.svg)](https://opencollective.com/nest#sponsor)-->

# Capstone API Fiverr

API backend cho ·ª©ng d·ª•ng Fiverr - Qu·∫£n l√Ω c√¥ng vi·ªác freelance ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi NestJS v10, Prisma ORM v√† MySQL.

## üöÄ T√≠nh nƒÉng

- **X√°c th·ª±c & Ph√¢n quy·ªÅn**: JWT-based authentication v·ªõi refresh token
- **Qu·∫£n l√Ω ng∆∞·ªùi d√πng**: CRUD operations v·ªõi validation
- **Qu·∫£n l√Ω c√¥ng vi·ªác**: T·∫°o, c·∫≠p nh·∫≠t, x√≥a v√† t√¨m ki·∫øm c√¥ng vi·ªác
- **Qu·∫£n l√Ω b√¨nh lu·∫≠n**: H·ªá th·ªëng b√¨nh lu·∫≠n v√† ƒë√°nh gi√°
- **Qu·∫£n l√Ω thu√™ c√¥ng vi·ªác**: Theo d√µi tr·∫°ng th√°i c√¥ng vi·ªác
- **Ph√¢n lo·∫°i c√¥ng vi·ªác**: H·ªá th·ªëng ph√¢n lo·∫°i ƒëa c·∫•p
- **API Documentation**: Swagger/OpenAPI v·ªõi Bearer token authentication
- **Logging & Monitoring**: Comprehensive logging v√† error handling
- **Security**: CORS, validation, v√† error handling

## üõ†Ô∏è C√¥ng ngh·ªá s·ª≠ d·ª•ng

- **Framework**: NestJS v10
- **Database**: MySQL v·ªõi Prisma ORM
- **Authentication**: JWT v·ªõi bcrypt
- **Validation**: class-validator
- **Documentation**: Swagger/OpenAPI
- **Language**: TypeScript

## üìã Y√™u c·∫ßu h·ªá th·ªëng

- Node.js 18+ 
- MySQL 8.0+
- npm ho·∫∑c yarn

## üîß C√†i ƒë·∫∑t

1. **Clone repository**
```bash
git clone <repository-url>
cd Capstone-API-fiverr
```

2. **C√†i ƒë·∫∑t dependencies**
```bash
npm install
```

3. **C·∫•u h√¨nh m√¥i tr∆∞·ªùng**
```bash
cp env.example .env
# Ch·ªânh s·ª≠a .env v·ªõi th√¥ng tin database v√† JWT secret
```

4. **C√†i ƒë·∫∑t v√† migrate database**
```bash
npx prisma generate
npx prisma db push
```

5. **Ch·∫°y ·ª©ng d·ª•ng**
```bash
# Development
npm run start:dev

# Production
npm run build
npm run start:prod
```

## üåê API Endpoints

### Base URL: `http://localhost:3000/api/v1`

### Authentication
- `POST /auth/register` - ƒêƒÉng k√Ω ng∆∞·ªùi d√πng m·ªõi
- `POST /auth/login` - ƒêƒÉng nh·∫≠p
- `POST /auth/refresh` - L√†m m·ªõi JWT token
- `GET /auth/profile` - L·∫•y th√¥ng tin profile (c·∫ßn JWT)
- `POST /auth/logout` - ƒêƒÉng xu·∫•t

### Users
- `GET /users` - L·∫•y danh s√°ch ng∆∞·ªùi d√πng (v·ªõi pagination, filters, search)
- `GET /users/:id` - L·∫•y th√¥ng tin ng∆∞·ªùi d√πng theo ID
- `POST /users` - T·∫°o ng∆∞·ªùi d√πng m·ªõi
- `PATCH /users/:id` - C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng
- `DELETE /users/:id` - X√≥a ng∆∞·ªùi d√πng

### C√¥ng vi·ªác
- `GET /cong-viec` - L·∫•y danh s√°ch c√¥ng vi·ªác (v·ªõi pagination, filters, search, sort)
- `GET /cong-viec/:id` - L·∫•y th√¥ng tin c√¥ng vi·ªác theo ID
- `POST /cong-viec` - T·∫°o c√¥ng vi·ªác m·ªõi
- `PATCH /cong-viec/:id` - C·∫≠p nh·∫≠t c√¥ng vi·ªác
- `DELETE /cong-viec/:id` - X√≥a c√¥ng vi·ªác
- `GET /cong-viec/category/:maChiTietLoai` - L·∫•y c√¥ng vi·ªác theo danh m·ª•c
- `GET /cong-viec/user/:nguoiTao` - L·∫•y c√¥ng vi·ªác theo ng∆∞·ªùi t·∫°o

### B√¨nh lu·∫≠n
- `GET /binh-luan` - L·∫•y danh s√°ch b√¨nh lu·∫≠n (v·ªõi pagination, filters)
- `GET /binh-luan/:id` - L·∫•y th√¥ng tin b√¨nh lu·∫≠n theo ID
- `POST /binh-luan` - T·∫°o b√¨nh lu·∫≠n m·ªõi
- `PATCH /binh-luan/:id` - C·∫≠p nh·∫≠t b√¨nh lu·∫≠n
- `DELETE /binh-luan/:id` - X√≥a b√¨nh lu·∫≠n
- `GET /binh-luan/cong-viec/:maCongViec` - L·∫•y b√¨nh lu·∫≠n theo c√¥ng vi·ªác
- `GET /binh-luan/user/:maNguoiBinhLuan` - L·∫•y b√¨nh lu·∫≠n theo ng∆∞·ªùi b√¨nh lu·∫≠n

### Thu√™ c√¥ng vi·ªác
- `GET /thue-cong-viec` - L·∫•y danh s√°ch thu√™ c√¥ng vi·ªác (v·ªõi pagination, filters)
- `GET /thue-cong-viec/:id` - L·∫•y th√¥ng tin thu√™ c√¥ng vi·ªác theo ID
- `POST /thue-cong-viec` - T·∫°o thu√™ c√¥ng vi·ªác m·ªõi
- `PATCH /thue-cong-viec/:id` - C·∫≠p nh·∫≠t thu√™ c√¥ng vi·ªác
- `PATCH /thue-cong-viec/:id/complete` - Ho√†n th√†nh c√¥ng vi·ªác
- `DELETE /thue-cong-viec/:id` - X√≥a thu√™ c√¥ng vi·ªác
- `GET /thue-cong-viec/cong-viec/:maCongViec` - L·∫•y thu√™ c√¥ng vi·ªác theo c√¥ng vi·ªác
- `GET /thue-cong-viec/user/:maNguoiThue` - L·∫•y thu√™ c√¥ng vi·ªác theo ng∆∞·ªùi thu√™

### Lo·∫°i c√¥ng vi·ªác
- `GET /loai-cong-viec` - L·∫•y danh s√°ch lo·∫°i c√¥ng vi·ªác
- `GET /loai-cong-viec/:id` - L·∫•y th√¥ng tin lo·∫°i c√¥ng vi·ªác theo ID
- `POST /loai-cong-viec` - T·∫°o lo·∫°i c√¥ng vi·ªác m·ªõi
- `PATCH /loai-cong-viec/:id` - C·∫≠p nh·∫≠t lo·∫°i c√¥ng vi·ªác
- `DELETE /loai-cong-viec/:id` - X√≥a lo·∫°i c√¥ng vi·ªác

### Chi ti·∫øt lo·∫°i c√¥ng vi·ªác
- `GET /chi-tiet-loai-cong-viec` - L·∫•y danh s√°ch chi ti·∫øt lo·∫°i c√¥ng vi·ªác
- `GET /chi-tiet-loai-cong-viec/:id` - L·∫•y th√¥ng tin chi ti·∫øt lo·∫°i c√¥ng vi·ªác theo ID
- `POST /chi-tiet-loai-cong-viec` - T·∫°o chi ti·∫øt lo·∫°i c√¥ng vi·ªác m·ªõi
- `PATCH /chi-tiet-loai-cong-viec/:id` - C·∫≠p nh·∫≠t chi ti·∫øt lo·∫°i c√¥ng vi·ªác
- `DELETE /chi-tiet-loai-cong-viec/:id` - X√≥a chi ti·∫øt lo·∫°i c√¥ng vi·ªác
- `GET /chi-tiet-loai-cong-viec/loai-cong-viec/:maLoaiCongViec` - L·∫•y chi ti·∫øt theo lo·∫°i c√¥ng vi·ªác

## üîê Authentication

API s·ª≠ d·ª•ng JWT Bearer token authentication. ƒê·ªÉ truy c·∫≠p c√°c endpoint ƒë∆∞·ª£c b·∫£o v·ªá:

1. ƒêƒÉng nh·∫≠p qua `/auth/login` ƒë·ªÉ nh·∫≠n access token
2. Th√™m header: `Authorization: Bearer <your-token>`
3. Token c√≥ th·ªùi h·∫°n 7 ng√†y
4. S·ª≠ d·ª•ng `/auth/refresh` ƒë·ªÉ l√†m m·ªõi token

## üìä Query Parameters

### Pagination
- `page`: Trang hi·ªán t·∫°i (m·∫∑c ƒë·ªãnh: 1)
- `pageSize`: S·ªë l∆∞·ª£ng item m·ªói trang (m·∫∑c ƒë·ªãnh: 10, t·ªëi ƒëa: 100)

### Filters
- `filters`: JSON string v·ªõi c√°c ƒëi·ªÅu ki·ªán l·ªçc
- V√≠ d·ª•: `{"name":"John","role":"user"}`

### Search
- `search`: T√¨m ki·∫øm text trong c√°c tr∆∞·ªùng
- H·ªó tr·ª£ t√¨m ki·∫øm kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng

### Sorting
- `sortBy`: Tr∆∞·ªùng ƒë·ªÉ s·∫Øp x·∫øp
- `sortOrder`: Th·ª© t·ª± s·∫Øp x·∫øp (`asc` ho·∫∑c `desc`)

## üìù V√≠ d·ª• s·ª≠ d·ª•ng

### ƒêƒÉng k√Ω ng∆∞·ªùi d√πng
```bash
curl -X POST http://localhost:3000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "John Doe",
    "email": "john@example.com",
    "pass_word": "password123",
    "phone": "0123456789",
    "role": "user"
  }'
```

### T·∫°o c√¥ng vi·ªác
```bash
curl -X POST http://localhost:3000/api/v1/cong-viec \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <your-token>" \
  -d '{
    "ten_cong_viec": "Web Developer",
    "gia_tien": 1000000,
    "mo_ta": "C·∫ßn developer web fullstack",
    "ma_chi_tiet_loai": 1,
    "nguoi_tao": 1
  }'
```

### T√¨m ki·∫øm c√¥ng vi·ªác v·ªõi filters
```bash
curl "http://localhost:3000/api/v1/cong-viec?page=1&pageSize=10&search=web&filters={\"gia_tien\":{\"gte\":500000}}&sortBy=gia_tien&sortOrder=desc"
```

## üö® Error Handling

API tr·∫£ v·ªÅ error responses v·ªõi format nh·∫•t qu√°n:

```json
{
  "statusCode": 400,
  "timestamp": "2024-01-01T00:00:00.000Z",
  "path": "/api/v1/users",
  "method": "POST",
  "message": "Email kh√¥ng h·ª£p l·ªá",
  "error": "Bad Request"
}
```

## üìö API Documentation

Swagger documentation c√≥ s·∫µn t·∫°i:
- Development: `http://localhost:3000/api-docs`
- Production: Kh√¥ng c√≥ s·∫µn (b·∫£o m·∫≠t)

## üß™ Testing

```bash
# Unit tests
npm run test

# E2E tests
npm run test:e2e

# Test coverage
npm run test:cov
```

## üê≥ Docker

```bash
# Build image
docker build -t capstone-api-fiverr .

# Run container
docker run -p 3000:3000 capstone-api-fiverr

# Docker Compose
docker-compose up -d
```

## üìÅ C·∫•u tr√∫c d·ª± √°n

```
src/
‚îú‚îÄ‚îÄ common/                 # Shared utilities
‚îÇ   ‚îú‚îÄ‚îÄ filters/           # Exception filters
‚îÇ   ‚îî‚îÄ‚îÄ interceptors/      # Request/Response interceptors
‚îú‚îÄ‚îÄ modules/               # Feature modules
‚îÇ   ‚îú‚îÄ‚îÄ auth/             # Authentication
‚îÇ   ‚îú‚îÄ‚îÄ user/             # User management
‚îÇ   ‚îú‚îÄ‚îÄ cong-viec/        # Job management
‚îÇ   ‚îú‚îÄ‚îÄ binh-luan/        # Comment management
‚îÇ   ‚îú‚îÄ‚îÄ thue-cong-viec/   # Job hiring management
‚îÇ   ‚îú‚îÄ‚îÄ loai-cong-viec/   # Job type management
‚îÇ   ‚îú‚îÄ‚îÄ chi-tiet-loai-cong-viec/ # Job detail type
‚îÇ   ‚îî‚îÄ‚îÄ prisma/           # Database service
‚îú‚îÄ‚îÄ app.module.ts          # Root module
‚îî‚îÄ‚îÄ main.ts               # Application entry point
```

## üîí Security Features

- JWT authentication v·ªõi refresh token
- Password hashing v·ªõi bcrypt
- Input validation v√† sanitization
- CORS configuration
- Global exception handling
- Request logging v√† monitoring

## üìà Performance

- Database connection pooling
- Query optimization v·ªõi Prisma
- Response compression
- Efficient pagination
- Caching strategies

## ü§ù Contributing

1. Fork repository
2. T·∫°o feature branch
3. Commit changes
4. Push to branch
5. T·∫°o Pull Request

## üìÑ License

UNLICENSED - Private project

## üìû Support

N·∫øu c√≥ v·∫•n ƒë·ªÅ ho·∫∑c c√¢u h·ªèi, vui l√≤ng t·∫°o issue trong repository.
